---
title: "通过直接连接添加成员集群"
keywords: "Kubernetes, {ks_product}, 多集群管理, 集群, 添加成员集群"
description: "介绍如何通过直接连接添加成员集群。"
weight: 01
---



本节介绍如何通过直接连接添加成员集群。

[.admon.attention,cols="a"]
|===
|注意

|
成员集群被纳管之前仅需安装 Kubernetes，无需安装 KubeSphere。若已安装 KubeSphere，请迁移数据并卸载 KubeSphere 后再进行纳管。
|===

== 前提条件

* 您需要在主集群中具有 **platform-admin** 角色。

* 主集群所有节点必须能访问成员集群的 Kubernetes API 服务（默认为成员集群主节点的 6443 端口）。取决于您的网络环境，您可能需要配置防火墙和流量转发规则。

== 获取成员集群 kubeconfig

. 在成员集群的节点上，执行以下命令获取成员集群的 kubeconfig 信息：
+
[,bash]
----
kubectl config view --raw
----

. 复制 kubeconfig 信息，并修改其中的 **clusters:cluster:server** 参数，如下：
+
[,yaml]
----
clusters:
- cluster:
    server: https://<member-cluster-node-ip>:6443
----


== 添加成员集群

include::../../../../../_custom/platformManagement/multiclusterManagement/clusters/clusters-oper-logInToHost.adoc[]

+

. 点击**集群管理**。

+

include::../../../../../_custom/platformManagement/multiclusterManagement/clusters/clusters-oper-addClusterBasicInfo.adoc[]
+
在**高级设置**下，设置集群的用途标识。


. 在**连接设置**页签，将**连接方式**设置为**直接连接**，在 **kubeconfig** 区域输入成员集群的 kubeconfig 信息，然后点击**下一步**。

. 在**集群配置**页签，设置集群配置，然后点击**创建**。
+
--
[.admon.note,cols="a"]
|===
|说明

|在集群配置中，请将镜像仓库地址修改为实际使用的仓库地址。默认为 KubeSphere 官方在线仓库地址，请确认可访问后使用。

|===

成员集群添加完成后将显示在**集群管理**页面的集群列表中。


[.admon.attention,cols="a"]
|===
|注意

ifeval::["{file_output_type}" == "html"]
|成员集群被纳管后，如果其 KubeSphere 版本与主集群的 KubeSphere 版本不一致，需在成员集群节点上手动link:../../../../../03-installation-and-upgrade/03-upgrade-kubesphere/[升级 KubeSphere]。待更新为相同 KubeSphere 版本后，才能在成员集群上进行后续操作。
endif::[]

ifeval::["{file_output_type}" == "pdf"]
|成员集群被纳管后，如果其 KubeSphere 版本与主集群的 KubeSphere 版本不一致，需在成员集群节点上手动升级 KubeSphere。待更新为相同 KubeSphere 版本后，才能在成员集群上进行后续操作。有关如何升级 KubeSphere，请参阅《KubeSphere 安装指南》。
endif::[]
|===
--