---
title: "Create a Canary Release Task"
keywords: "Kubernetes, {ks_product}, Project Management, Canary Release, Create a Canary Release Task"
description: "Describes how to create a canary release task."
weight: 01
---

:ks_permission: ** Service Mesh Management**
:ks_navigation: **Canary Release > Canary Release**

This section describes how to create a canary release task.

== Prerequisites

:relfileprefix: ../../../../
* {empty}
include::../../../../_custom/projectManagement/projectManagement-prer-requiredPermission_v42.adoc[]

:relfileprefix: ./

* The **KubeSphere Service Mesh** extension must be installed and enabled on the KubeSphere platform.

* Prepare the new version of the container image in advance and upload it to the container image service. Ensure the network connection between the container image service and KubeSphere is normal.

== Steps

Refer to link:#_parameter-description[Parameter Description] to set the parameters for the canary release task.

include::../../../../_custom/workspaceManagement/workspaceManagement-oper-openWorkspacePage.adoc[]

+

include::../../../../../_ks_components/oper-navigate.adoc[]

+

include::../../../../_custom/projectManagement/projects-oper-dropdownList.adoc[]

+

. Hover over the **Blue-Green Deployment**, **Canary Release**, or **Traffic Mirroring** area based on the type of canary release task you need, and then click **Create**.

. On the **Basic Information** tab, set the name for the canary release task, and then click **Next**.

. On the **Service Settings** tab, select the application and service for the canary release, and then click **Next**.

. On the **New Version Settings** tab, set the service version number, pod replica count, and container for the new version, and then click **Next**.

. On the **Strategy Settings** tab, set the traffic forwarding strategy and release strategy for the canary release task, and then click **Create**.
+
--
After the canary release task is created, it will be displayed on the **Release Tasks** tab of the **Canary Release** page.
--

== Parameter Description

The following describes how to set the parameters for a canary release task.

* Basic Information
+
--
Set the task name. The name can only contain lowercase letters, numbers, and hyphens (-), must start and end with a lowercase letter or number, and can be up to 253 characters long.
--

* Service Settings
+
--
Select the composed app and service for the canary release.

* Click the drop-down list to select a composed app.

* Click **Select** on the right side of the service that requires the canary release.

// Note
include::../../../../../_ks_components/admonitions/note.adoc[]

Canary release only supports composed apps, not template-based apps.

include::../../../../../_ks_components/admonitions/admonEnd.adoc[]
--

* New Version Settings
+
--
Set the service version number, pod replica count, and container for the new version.

[%header,cols="1a,4a"]
|===
|Parameter |Description

|New Version
|The service version number for the new version. The new version number can only contain lowercase letters and numbers, with a maximum length of 16 characters.

|Replicas
|
The pod replica count for the new version. Click image:/images/ks-qkcp/zh/icons/chevron-up.svg[chevron-up,18,18]/image:/images/ks-qkcp/zh/icons/chevron-down.svg[chevron-down,18,18] to increase/decrease the number of pod replicas.

|Add Container
|
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-addContainer.adoc[]

* Directly entering the container image URL in the text box can replace the old version's container image while keeping other container settings unchanged.
|===
--

* New Version Settings > Add Container > Container Settings
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-desc-setImageNameTypeResource.adoc[]

[%header,cols="1a,4a"]
|===
|Parameter |Description

include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-containerImage.adoc[]

include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-containerName.adoc[]

include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-containerType.adoc[]

|CPU Request
|The CPU resources reserved for the container, in cores.

|CPU Limit
|The upper limit of CPU resources allowed for the container, in cores.

|Memory Request
|The memory resources reserved for the container, in MiB.

|Memory Limit
|The upper limit of memory resources allowed for the container, in MiB.
|===
--

* New Version Settings > Add Container > Port Settings
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-Port.adoc[]
--

* New Version Settings > Add Container > Image Pull Policy
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-imagePullPolicy.adoc[]
--

* New Version Settings > Add Container > Health Check
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-healthCheck.adoc[]
--

* New Version Settings > Add Container > Health Check > Add Probe
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-addProbe.adoc[]
--

* New Version Settings > Add Container > Lifecycle Management
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-lifecycleManagement.adoc[]
--

* New Version Settings > Add Container > Lifecycle Management > Add Action
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-addAction.adoc[]
--

* New Version Settings > Add Container > Startup Command
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-startCommand.adoc[]
--

* New Version Settings > Add Container > Environment Variables
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-environmentVariables.adoc[]
--

* New Version Settings > Add Container > Pod Security Context
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-containerSecurityContext.adoc[]
--

* New Version Settings > Add Container > Sync Host Timezone
+
--
include::../../../../_custom/clusterManagement/workloads/createWorkload/workloads-para-syncTimeZone.adoc[]
--

* Strategy Settings
+
====
Set the business traffic forwarding strategy for the canary release task.

include::../../../../_custom/projectManagement/grayscaleRelease/grayscaleRelease-para-strategySettings.adoc[]
====

include::../../../../_custom/projectManagement/grayscaleRelease/grayscaleRelease-para-releasePolicy.adoc[]